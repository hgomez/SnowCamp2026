## ‚ùÑÔ∏è SnowCamp 2026 - Proposition de Lab NRF52840

### Th√®me : Le Thermom√®tre Social BLE (Bluetooth Low Energy) - Meet & Chips

---

### I. üìã Pr√©requis et Pr√©paration (√Ä faire avant le Lab)

Pour garantir que les 3 heures soient d√©di√©es au code et non √† l'installation, les participants doivent avoir :

#### A. Outils de D√©veloppement (D√©j√† mentionn√©s)

* **IDE :** [VSCode](https://code.visualstudio.com/)
* **Extension :** [PlatformIO Extension](https://docs.platformio.org/en/latest/integration/ide/vscode.html)
* **Pilotes :** Les pilotes USB/UART n√©cessaires pour le type de carte utilis√© (ex: Siag Labs, Adafruit).

#### B. Mat√©riel Requis

* **Carte :** **Xiao nRF52840** 
    * *Raison :* Le Xiao est compact et √©conomique, parfait pour un Lab.
* **C√¢ble :** C√¢ble USB-C (pour le Xiao) ou Micro-USB (pour le Feather).

#### C. Configuration de PlatformIO (√Ä pr√©parer)

1.  Cr√©er un nouveau projet PlatformIO.
2.  Utiliser la plateforme `nordicnrf52`.
3.  Installer le Core Arduino Adafruit pour le nRF52.
4.  V√©rifier que le programme de base ("Blink") compile et se t√©l√©charge.

---

### II. üéØ Objectif du Lab (3 Heures Chrono)

L'objectif est de construire un "Thermom√®tre Social" simple o√π les cartes nRF52 diffusent un "√©tat" et scannent l'environnement pour comptabiliser les autres √©tats.

#### A. √âtapes Techniques

1.  **Advertising (1h00) :** Mettre en place la diffusion d'un paquet BLE *Non-Connectable* (comme dans notre discussion pr√©c√©dente) avec un nom structur√© :
    * **Format :** `M&G<ID>+<TOPIC>` (Ex: `M&G1234+JAVA ` ou `M&G4567-NODE `)
    * **Rotation :** Impl√©menter la rotation du sujet toutes les 35 secondes (`advertising_topic_duration_ms`).
    * *Niveau 1 :* Rotation manuelle (`next_topic()`).
    * *Niveau 2 :* Rotation bas√©e sur un capteur (si la carte en a un, ex: bouton, temp√©rature).

2.  **Scanning (1h30) :** Impl√©menter le balayage continu pour d√©tecter les autres cartes `M&G`.
    * **Impl√©mentation :** Utiliser la `scan_callback` pour filtrer les noms et extraire le `TOPIC`.
    * **Probl√®me de Cache :** Utiliser le contournement du cache (red√©marrage du scan toutes les 5 secondes) pour garantir la d√©tection continue.

3.  **Comptage & Affichage (30 min) :** Maintenir un tableau ou une structure de donn√©es pour comptabiliser les *topics* vus r√©cemment.
    * Afficher sur le **Moniteur S√©rie** le Top 3 des sujets les plus populaires vus par la carte.

#### B. Th√®mes possibles pour la Rotation

* **Humeur :** `+FEELING` (Bien), `-FEELING` (Moyen), `~FEELING` (Fatigu√©).
* **Sujets de Conf√©rence :** `+IA`, `-OPS`, `+WEB`.
* **Boissons :** `+COFFEE`, `-TEA`, `+BEER`.

---

### III. üìù Conclusion et Next Steps (Pour la suite)

* **D√©fis :** Comment g√©rer le temps √©coul√© (timeout) pour que les sujets cessent d'√™tre compt√©s apr√®s 60 secondes ? (Utilisation de structures `struct` et `millis()` pour l'expiration).
* **Am√©lioration :** Afficher l'√©tat sur un LED (ex: LED Verte si `+TOPIC` est le plus vu, LED Rouge si `-TOPIC` est le plus vu).

Ce Lab touche √† la gestion de l'√©tat (rotation), au BLE (Advertising/Scanning) et aux d√©fis r√©els de l'embarqu√© (timing, cache de librairie), ce qui en fait un excellent exercice de 3 heures.